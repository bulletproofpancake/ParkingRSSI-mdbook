<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ParkingRSSI Documentation</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="chapters/index.html">Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Activity</li><li class="chapter-item expanded "><a href="chapters/ch1/mainActivity.html"><strong aria-hidden="true">1.</strong> MainActivity</a></li><li class="chapter-item expanded affix "><li class="part-title">Classes</li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> DBHelper</div></li><li class="chapter-item expanded "><a href="chapters/knn/knnClassifier.html"><strong aria-hidden="true">3.</strong> KNNClassifier</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> RecyclerViewAdapter</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Router</div></li><li class="chapter-item expanded affix "><li class="part-title">Fragments</li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> DataFragment</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> HomeFragment</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> ScanRouterFragment</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ParkingRSSI Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<p>This Smart Parking System uses the K-Nearest Neighbors (KNN) algorithm in order to calculate the amount of available parking spaces
using Received Signal Strength Indicator (RSSI) values.</p>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h2>
<h3 id="plotting-the-points"><a class="header" href="#plotting-the-points">Plotting the points</a></h3>
<p>In this program, the K-Nearest Neighbors (KNN) algorithm is implemented by collecting the Received Signal Strength Indicator (RSSI) values
of a parking lot with a set amount of cars. This can be visualized in a table like so:</p>
<div class="table-wrapper"><table><thead><tr><th>Number of Cars</th><th>RSSI Values</th></tr></thead><tbody>
<tr><td>0</td><td>-30.0, -27.0</td></tr>
<tr><td>1</td><td>-22.0, -27.0</td></tr>
<tr><td>1</td><td>-26.0, -24.0</td></tr>
<tr><td>1</td><td>-29.0, -25.0</td></tr>
<tr><td>1</td><td>-32.0, -23.0</td></tr>
</tbody></table>
</div>
<p>And this is how it can be seen in a graph:</p>
<p><img src="https://i.imgur.com/nZFeIgk.png" alt="" /></p>
<p>When the app is used to check how many parking spaces are still available, it compares the current RSSI values to the existing data.</p>
<p>Let us say for example that we used the app and got the following data:</p>
<div class="table-wrapper"><table><thead><tr><th>Number of Cars</th><th>RSSI Values</th></tr></thead><tbody>
<tr><td>?</td><td>-30.0, -22.0</td></tr>
</tbody></table>
</div>
<p>And in a graph, it appears like this in accordance with the existing data:</p>
<p><img src="https://i.imgur.com/OpzUjGu.png" alt="" /></p>
<h3 id="the-k-value"><a class="header" href="#the-k-value">The k-value</a></h3>
<p>Now that we have our point, this is where the value of <code>k</code> comes into place. <code>k</code> is the number of neighboring points we compare to in order to
classify our point. Remember that each category is the amount of cars for that set of RSSI values.</p>
<blockquote>
<p>By default, the value of <code>k</code> in the program is 3. This means that the algorithm only compares the current point to 3 neighboring points.
Increasing the value of <code>k</code> is better for accuracy, at the cost of speed.
In this example, the classification of the point has changed depending on the value of the <code>k</code>:
<img src="https://helloacm.com/wp-content/uploads/2016/03/2012-10-26-knn-concept.png" alt="" /></p>
</blockquote>
<h3 id="getting-the-nearest-points"><a class="header" href="#getting-the-nearest-points">Getting the nearest points</a></h3>
<p>Now that we have our k value, it is time to get our nearest neighbors.
In order to get the distance from the current point to the neighboring points, the program uses the Euclidean Distance formula:</p>
<p>\[ d(p,q) = \sqrt {\sum_{i=1}^n (q_i - p_i)^2}  \]</p>
<p>where:</p>
<ul>
<li>\(p, q\) = two points in Euclidean n-space</li>
<li>\(q_i, p_i\) = Euclidean vectors, starting from the origin of the space (initial point)</li>
<li>\(n\) = n-space</li>
</ul>
<blockquote>
<p><strong>NOTE:</strong> If this looks complex, it is similar to calculating the length of the hypothenuse in a triangle (Pythagorean Theorem).
\[hypothenuse = \sqrt{{leg_1}^2 + {leg_2}^2}\]
I recommend studying more Vector maths in order to get a better understanding of Euclidean Distance.</p>
</blockquote>
<p>In our program, calculating the distances can be visualized as such in accordance with the existing data:</p>
<ul>
<li>\(p\) = coordinates of the current point</li>
<li>\(q\) = coordinates of the point of a neighbor. I will be using the amount of cars as the label for clarity.</li>
<li>\(d\) = distance between our points</li>
</ul>
<blockquote>
<p>Do take note that adding more routers would only mean adding more rows to the table,
however it would be more difficult to visualize in a 2D graph like the ones presented in this document.</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>p</th><th>q (0)</th><th>Equation</th><th>d</th></tr></thead><tbody>
<tr><td>-30.0</td><td>-30.0</td><td>\(\sqrt{(-30.0 + 30.0)^2}\)</td><td>0</td></tr>
<tr><td>-22.0</td><td>-27.0</td><td>\(\sqrt{(-27.0 + 22.0)^2}\)</td><td>5</td></tr>
</tbody></table>
</div>
<p>\[\sum d(p,q)_0 = 0 + 5 = 5\]</p>
<div class="table-wrapper"><table><thead><tr><th>p</th><th>q (\(1_0\))</th><th>Equation</th><th>d</th></tr></thead><tbody>
<tr><td>-30.0</td><td>-22.0</td><td>\(\sqrt{(-22.0 + 30.0)^2}\)</td><td>8</td></tr>
<tr><td>-22.0</td><td>-27.0</td><td>\(\sqrt{(-27.0 + 22.0)^2}\)</td><td>5</td></tr>
</tbody></table>
</div>
<p>\[\sum d(p,q)_1 = 8 + 5 = 13\]</p>
<div class="table-wrapper"><table><thead><tr><th>p</th><th>q (\(1_1\))</th><th>Equation</th><th>d</th></tr></thead><tbody>
<tr><td>-30.0</td><td>-26.0</td><td>\(\sqrt{(-26.0 + 30.0)^2}\)</td><td>4</td></tr>
<tr><td>-22.0</td><td>-24.0</td><td>\(\sqrt{(-24.0 + 22.0)^2}\)</td><td>2</td></tr>
</tbody></table>
</div>
<p>\[\sum d(p,q)_2 = 4 + 2 = 6\]</p>
<div class="table-wrapper"><table><thead><tr><th>p</th><th>q (\(1_2\))</th><th>Equation</th><th>d</th></tr></thead><tbody>
<tr><td>-30.0</td><td>-29.0</td><td>\(\sqrt{(-29.0 + 30.0)^2}\)</td><td>1</td></tr>
<tr><td>-22.0</td><td>-25.0</td><td>\(\sqrt{(-25.0 + 22.0)^2}\)</td><td>3</td></tr>
</tbody></table>
</div>
<p>\[\sum d(p,q)_3 = 1 + 3 = 4\]</p>
<div class="table-wrapper"><table><thead><tr><th>p</th><th>q (\(1_3\))</th><th>Equation</th><th>d</th></tr></thead><tbody>
<tr><td>-30.0</td><td>-32.0</td><td>\(\sqrt{(-32.0 + 30.0)^2}\)</td><td>2</td></tr>
<tr><td>-22.0</td><td>-23.0</td><td>\(\sqrt{(-23.0 + 22.0)^2}\)</td><td>1</td></tr>
</tbody></table>
</div>
<p>\[\sum d(p,q)_4 = 2 + 1 = 3\]</p>
<p>After we calculate the distances for each point, we can visualize them like so:</p>
<div class="table-wrapper"><table><thead><tr><th>Amount of Cars</th><th>Index</th><th>Distance</th></tr></thead><tbody>
<tr><td>0</td><td>0</td><td>5</td></tr>
<tr><td>1</td><td>1</td><td>13</td></tr>
<tr><td>1</td><td>2</td><td>6</td></tr>
<tr><td>1</td><td>3</td><td>4</td></tr>
<tr><td>1</td><td>4</td><td>3</td></tr>
</tbody></table>
</div>
<p>At this point, we only have the distances to other points, but we do not know yet the nearest neighbors.
In order to get the nearest neighbors, all we need to do is to sort the distances like so:</p>
<div class="table-wrapper"><table><thead><tr><th>Amount of Cars</th><th>Index</th><th>Distance</th></tr></thead><tbody>
<tr><td>1</td><td>4</td><td>3</td></tr>
<tr><td>1</td><td>3</td><td>4</td></tr>
<tr><td>0</td><td>0</td><td>5</td></tr>
<tr><td>1</td><td>2</td><td>6</td></tr>
<tr><td>1</td><td>1</td><td>13</td></tr>
</tbody></table>
</div>
<p>Now that the distances have been sorted, the nearest neighbors can now be gathered in accordance with the <code>k</code> value.
Since the default of <code>k</code> is 3, the nearest points would be the following:</p>
<div class="table-wrapper"><table><thead><tr><th>Amount of Cars</th><th>Index</th><th>Distance</th><th>RSSI Values</th></tr></thead><tbody>
<tr><td>1</td><td>4</td><td>3</td><td>-32.0, -23.0</td></tr>
<tr><td>1</td><td>3</td><td>4</td><td>-29.0, -25.0</td></tr>
<tr><td>0</td><td>0</td><td>5</td><td>-30.0, -27.0</td></tr>
</tbody></table>
</div>
<p>In a graph, it can be visualized like so:
<img src="https://i.imgur.com/b7MSijK.png" alt="" /></p>
<p>Because there is only 1 point that has zero cars, and 2 points that have one car,
according to the KNN algorithm, the RSSI values of the current point (-30, -22) would state that
there is 1 parking slot occupied.</p>
<p><img src="https://i.imgur.com/O8n6Szo.png" alt="" /></p>
<p>This means that in a parking lot of 10 slots, there is 1 occupied slot and 9 available slots.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="main-activity"><a class="header" href="#main-activity">Main Activity</a></h1>
<ul>
<li>Controls the navigation of the app.</li>
</ul>
<h2 id="code-analysis"><a class="header" href="#code-analysis">Code Analysis</a></h2>
<h3 id="mainactivitykt"><a class="header" href="#mainactivitykt">MainActivity.kt</a></h3>
<pre><code class="language-kt">class MainActivity : AppCompatActivity() {

    private lateinit var binding: ActivityMainBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        val navView: BottomNavigationView = binding.navView

        val navController = findNavController(R.id.nav_host_fragment_activity_main)
        // Passing each menu ID as a set of Ids because each
        // menu should be considered as top level destinations.
        val appBarConfiguration = AppBarConfiguration(
            setOf(
                R.id.navigation_home, R.id.navigation_scan_routers, R.id.navigation_notifications
            )
        )
        setupActionBarWithNavController(navController, appBarConfiguration)
        navView.setupWithNavController(navController)
    }
}
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Snippet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>class MainActivity : AppCompatActivity()</code></td><td>Declares a class named <code>MainActivity</code> that inherits from <a href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatActivity"><code>AppCompatActivity</code></a>.</td></tr>
<tr><td><code>private lateinit var binding : ActivityMainBinding</code></td><td>Declares a variable named <code>binding</code> of which is used to <a href="https://developer.android.com/topic/libraries/data-binding/expressions#binding_data">bind the code to the <code>activity_main.xml</code> layout</a>.</td></tr>
<tr><td><code>override fun onCreate(savedInstanceState:Bundle?)</code></td><td><a href="https://kotlinlang.org/docs/inheritance.html">Overrides</a> the <code>onCreate</code> function from <a href="https://developer.android.com/reference/android/app/Activity#onCreate(android.os.Bundle)"><code>Activity</code></a> <em>(the class which <code>AppCompatActivity</code> inherits from)</em>.</td></tr>
<tr><td><code>super.onCreate(savedInstanceState)</code></td><td>Executes the <code>onCreate</code> function as it is implemented by the classes <code>MainActivity</code> inherits from.</td></tr>
<tr><td><code>binding = ActivityMainBinding.inflate(layoutInflated)</code></td><td><a href="https://stackoverflow.com/questions/4576330/what-does-it-mean-to-inflate-a-view-from-an-xml-file">Makes the contents of the xml file bound to <code>ActivityMainBinding</code> accessible.</a></td></tr>
<tr><td><code>setContentView(binding.root)</code></td><td><a href="https://developer.android.com/reference/android/app/Activity#setContentView(android.view.View)">Sets the content view</a> on the <a href="https://developer.android.com/reference/android/databinding/ViewDataBinding#getroot"><code>root</code></a> of the view.</td></tr>
<tr><td><code>val navView: BottomNavigationView = binding.navView</code></td><td>Declares a variable named <code>navView</code> which is of type <a href="https://developer.android.com/reference/com/google/android/material/bottomnavigation/BottomNavigationView"><code>BottomNavigationView</code></a> from the <code>navView</code> property of <code>binding</code></td></tr>
<tr><td><code>val navController = findNavController(R.id.nav_host_fragment_activity_main)</code></td><td>Declares a variable named <code>navController</code> and sets it to the <code>navHostFragment</code> from <code>activity_main.xml</code>.</td></tr>
<tr><td><code>val appBarConfiguration = AppBarConfiguration(setOf(R.id.navigation_home, R.id.navigation_scan_routers, R.id.navigation_notifications)</code></td><td><a href="https://developer.android.com/reference/androidx/navigation/ui/AppBarConfiguration">Creates a configuration for the application bar.</a></td></tr>
<tr><td><code>setupActionBarWithNavController(navController, appBarConfiguration)</code></td><td><a href="https://developer.android.com/reference/androidx/navigation/ui/NavigationUI#setupActionBarWithNavController(androidx.appcompat.app.AppCompatActivity,androidx.navigation.NavController,androidx.navigation.ui.AppBarConfiguration)">Sets up the action bar to the <code>navController</code>.</a></td></tr>
<tr><td><code>navView.setupWithNavController(navController)</code></td><td><a href="https://developer.android.com/reference/androidx/navigation/ui/NavigationUI#setupWithNavController(com.google.android.material.navigation.NavigationBarView,androidx.navigation.NavController)">Sets up the navigation view according to the <code>navController</code>.</a></td></tr>
</tbody></table>
</div>
<p>In order for this code to make sense, we must also see how it looks in the context of the app, so we would also need to understand the <code>activity_main.xml</code> and <code>mobile_navigation.xml</code> files.</p>
<h3 id="understanding-the-layout"><a class="header" href="#understanding-the-layout">Understanding the layout</a></h3>
<h4 id="activity_main"><a class="header" href="#activity_main">activity_main</a></h4>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/container&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;com.google.android.material.bottomnavigation.BottomNavigationView
        android:id=&quot;@+id/nav_view&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;56dp&quot;
        android:layout_marginStart=&quot;0dp&quot;
        android:layout_marginEnd=&quot;0dp&quot;
        android:background=&quot;?android:attr/windowBackground&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;
        app:layout_constraintRight_toRightOf=&quot;parent&quot;
        app:menu=&quot;@menu/bottom_nav_menu&quot; /&gt;

    &lt;fragment
        android:id=&quot;@+id/nav_host_fragment_activity_main&quot;
        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_marginBottom=&quot;56dp&quot;
        app:defaultNavHost=&quot;true&quot;
        app:layout_constraintBottom_toTopOf=&quot;@+id/nav_view&quot;
        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;
        app:layout_constraintRight_toRightOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:navGraph=&quot;@navigation/mobile_navigation&quot; /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
<p>Output:
<img src="https://i.imgur.com/ulc91yD.png" alt="" /></p>
<p>Once we open up <code>activity_main.xml</code> we can see the app, and more importantly, its layout. If we look at the layout, we can see that at the bottom portion of our screen, we have a bar that is named <code>nav_view</code> which hosts the different buttons we need to navigate our app and the rest of the screen is taken up by the <code>nav_host_fragment_activity_main</code>, which would display the different screens of the app.</p>
<p>In our <code>MainActivity.kt</code> file, we assign these properties to variables that we can access in code. The <code>nav_view</code> property is set to the <code>navView</code> variable, and the <code>nav_host_fragment_activity_main</code> is set to the <code>navController</code> variable.</p>
<pre><code class="language-kt">        val navView: BottomNavigationView = binding.navView

        val navController = findNavController(R.id.nav_host_fragment_activity_main)
</code></pre>
<p>To control the fragments shown on the screen, we need to create an <code>appBarConfiguration</code> which determines the elements for the <code>navView</code>, and for this we would need the <code>mobile_navigation.xml</code>.</p>
<h4 id="mobile_navigation"><a class="header" href="#mobile_navigation">mobile_navigation</a></h4>
<p>Source:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:id=&quot;@+id/mobile_navigation&quot;
    app:startDestination=&quot;@+id/navigation_home&quot;&gt;

    &lt;fragment
        android:id=&quot;@+id/navigation_home&quot;
        android:name=&quot;com.silentrald.parkingrssi.ui.HomeFragment&quot;
        android:label=&quot;@string/title_home&quot;
        tools:layout=&quot;@layout/fragment_home&quot; /&gt;

    &lt;fragment
        android:id=&quot;@+id/navigation_scan_routers&quot;
        android:name=&quot;com.silentrald.parkingrssi.ui.ScanRouterFragment&quot;
        android:label=&quot;@string/scan_routers&quot;
        tools:layout=&quot;@layout/fragment_scan_router&quot; /&gt;

    &lt;fragment
        android:id=&quot;@+id/navigation_notifications&quot;
        android:name=&quot;com.silentrald.parkingrssi.ui.DataFragment&quot;
        android:label=&quot;@string/data&quot;
        tools:layout=&quot;@layout/fragment_data&quot; /&gt;
&lt;/navigation&gt;
</code></pre>
<p>Output:
<img src="https://i.imgur.com/QJqS5iv.png" alt="" /></p>
<p>If we open up <code>mobile_navigation.xml</code>, we can see the different screens of our app, and when we look at the code side of things we can see that the ids of each fragment correspond to the parameters which have been set in the <code>appBarConfiguration</code>.</p>
<pre><code class="language-xml">    &lt;fragment
        android:id=&quot;@+id/navigation_home&quot;
        android:name=&quot;com.silentrald.parkingrssi.ui.HomeFragment&quot;
        android:label=&quot;@string/title_home&quot;
        tools:layout=&quot;@layout/fragment_home&quot; /&gt;
</code></pre>
<pre><code class="language-xml">    &lt;fragment
        android:id=&quot;@+id/navigation_scan_routers&quot;
        android:name=&quot;com.silentrald.parkingrssi.ui.ScanRouterFragment&quot;
        android:label=&quot;@string/scan_routers&quot;
        tools:layout=&quot;@layout/fragment_scan_router&quot; /&gt;
</code></pre>
<pre><code class="language-xml">    &lt;fragment
        android:id=&quot;@+id/navigation_notifications&quot;
        android:name=&quot;com.silentrald.parkingrssi.ui.DataFragment&quot;
        android:label=&quot;@string/data&quot;
        tools:layout=&quot;@layout/fragment_data&quot; /&gt;
</code></pre>
<pre><code class="language-kt">        // Passing each menu ID as a set of Ids because each
        // menu should be considered as top level destinations.
        val appBarConfiguration = AppBarConfiguration(
            setOf(
                R.id.navigation_home, R.id.navigation_scan_routers, R.id.navigation_notifications
            )
</code></pre>
<p>Once the <code>appBarConfiguration</code> has been made, we would now apply it to the <code>navController</code> so that when we select an option from the <code>nav_view</code> portion of our screen, it would reflect on the <code>nav_host_fragment_activity_main</code> portion as well.</p>
<pre><code class="language-kt">        setupActionBarWithNavController(navController, appBarConfiguration)
        navView.setupWithNavController(navController)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="knn-classifier"><a class="header" href="#knn-classifier">KNN Classifier</a></h1>
<ul>
<li>Contains the logic implementing the <a href="https://bit.ly/2OcMqHv">K-Nearest Neighbor Algorithm</a>.</li>
</ul>
<h1 id="code-analysis-1"><a class="header" href="#code-analysis-1">Code Analysis</a></h1>
<h2 id="declaration-and-global-variables"><a class="header" href="#declaration-and-global-variables">Declaration and Global Variables</a></h2>
<pre><code class="language-kt">class KNNClassifier(var k: Int = 3) { //k is the literal property for KNN
    var inputSize: Int = 6 //depende kung ilang yung number of routers
    val matrix = arrayListOf&lt;ArrayList&lt;Float&gt;&gt;() //values ng RSSI, 2D matrix siya
    val labels = arrayListOf&lt;Int&gt;()
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Snippet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>class KNNClassifier(var k: Int = 3)</code></td><td>Declares a class of <code>KNNClassifier</code> with the initial value of <code>k</code> set to <code>3</code>. <code>k</code> is the number of points that are to be evaluated before a given point is classified. <img src="https://miro.medium.com/max/753/0*jqxx3-dJqFjXD6FA" alt="" /></td></tr>
<tr><td><code>var inputSize: Int = 6</code></td><td>The number of routers to include in the algorithm. Initially set to <code>6</code>.</td></tr>
<tr><td><code>val matrix = arrayListOf&lt;ArrayList&lt;Float&gt;&gt;()</code></td><td>Declares a list of the values of the RSSI for each router.</td></tr>
<tr><td><code>val labels = arrayListOf&lt;Int&gt;()</code></td><td>Declares a list of labels for the matrix.</td></tr>
</tbody></table>
</div>
<h2 id="methods"><a class="header" href="#methods">Methods</a></h2>
<h2 id="addpoint"><a class="header" href="#addpoint">addPoint</a></h2>
<pre><code class="language-kt">    fun addPoint(point: ArrayList&lt;Float&gt;, label: Int) { //training part
        if (point.size != inputSize) {
            return
        }

        matrix.add(point)
        labels.add(label)
    }
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Snippet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>fun addPoint(point:ArrayList&lt;Float&gt;, label: Int)</code></td><td>Declares a method that adds a point and label to <code>matrix</code> and <code>labels</code>.</td></tr>
<tr><td><code>if(point.size != inputSize) { return }</code></td><td>Exits the method if the number of points given is not the same as the <code>inputSize</code>.</td></tr>
<tr><td><code>matrix.add(point)</code></td><td>Adds the point to <code>matrix</code>.</td></tr>
<tr><td><code>labels.add(label)</code></td><td>Adds the label to <code>labels</code>.</td></tr>
</tbody></table>
</div>
<h3 id="visualization"><a class="header" href="#visualization">Visualization</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Variables</th><th>Value</th></tr></thead><tbody>
<tr><td><code>point</code></td><td>[ 0f, 1f, 2f, 3f, 4f ]</td></tr>
<tr><td><code>label</code></td><td>5</td></tr>
</tbody></table>
</div>
<p>Given the values of <code>point</code> and <code>label</code>, if we were to call the <code>addPoint</code> method and <code>matrix</code> and <code>labels</code> does not have any data on them, their values would be the following:</p>
<div class="table-wrapper"><table><thead><tr><th>variable</th><th>value</th></tr></thead><tbody>
<tr><td><code>matrix</code></td><td>[ 0f, 1f, 2f, 3f, 4f ]</td></tr>
<tr><td><code>labels</code></td><td>5</td></tr>
</tbody></table>
</div>
<p>If we were to call the function with the same value of <code>point</code> and <code>label</code> again, the values for <code>matrix</code> and <code>labels</code> would now be:</p>
<div class="table-wrapper"><table><thead><tr><th>variable</th><th>value</th></tr></thead><tbody>
<tr><td><code>matrix</code></td><td>[ 0f, 1f, 2f, 3f, 4f ], [ 0f, 1f, 2f, 3f, 4f ]</td></tr>
<tr><td><code>labels</code></td><td>5, 5</td></tr>
</tbody></table>
</div>
<h2 id="calculatedistance"><a class="header" href="#calculatedistance">calculateDistance</a></h2>
<pre><code class="language-kt">    private fun calculateDistance(ps1: ArrayList&lt;Float&gt;, ps2: ArrayList&lt;Float&gt;): Float { //evaluation part
        if (ps1.size != ps2.size) return -1f //kuhanin lahat ng distances dito ng bagong point.

        var distance = 0f
        for (i in 0 until ps1.size) {
            distance += (ps1[i] - ps2[i]).pow(2)
        }
        return distance
    }
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Snippet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>private fun calculateDistance(ps1: ArrayList&lt;Float&gt;, ps2: ArrayList&lt;Float&gt;) : Float</code></td><td>Declares a method that calculates the distances between the list of Floats <code>ps1</code> and <code>ps2</code>, then returns a <code>Float</code> value.</td></tr>
<tr><td><code>if (ps1.size != ps2.size) return -1f</code></td><td>Returns <code>-1f</code> if the amount of points given are not the same. This means that the set of points are invalid.</td></tr>
<tr><td><code>var distance = 0f</code></td><td>Declares a variable <code>distance</code> with the value of <code>0f</code>.</td></tr>
<tr><td><code>for (i in 0 until ps1.size)</code></td><td>Creates a loop that ends until the size of the first list of points is reached.</td></tr>
<tr><td><code>distance += (ps1[i] - ps2[i]).pow(2)</code></td><td>Adds the distance to the squared difference of each point in <code>ps1</code> and <code>ps2</code>.</td></tr>
<tr><td><code>return distance</code></td><td>Returns the value of <code>distance</code>.</td></tr>
</tbody></table>
</div>
<h3 id="visualization-1"><a class="header" href="#visualization-1">Visualization</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Variables</th><th>Value</th></tr></thead><tbody>
<tr><td><code>ps1</code></td><td>9f, 8f, 7f, 6f, 5f</td></tr>
<tr><td><code>ps2</code></td><td>0f, 1f, 2f, 3f, 4f</td></tr>
</tbody></table>
</div>
<p>Given the values of <code>ps1</code> and <code>ps2</code>, the distance that should be returned by the function is calculated like so:</p>
<div class="table-wrapper"><table><thead><tr><th>Index</th><th>Points</th><th>Value</th><th>Distance</th></tr></thead><tbody>
<tr><td>0</td><td>(9f-0f)^2</td><td>81f</td><td>81f</td></tr>
<tr><td>1</td><td>(8f-1f)^2</td><td>49f</td><td>130f</td></tr>
<tr><td>2</td><td>(7f-2f)^2</td><td>25f</td><td>155f</td></tr>
<tr><td>3</td><td>(6f-3f)^2</td><td>9f</td><td>164f</td></tr>
<tr><td>4</td><td>(5f-4f)^2</td><td>1f</td><td>165f</td></tr>
</tbody></table>
</div>
<p>With this, the value of the distance that will be returned would be <code>165f</code>.</p>
<h2 id="predict"><a class="header" href="#predict">predict</a></h2>
<h3 id="declaration"><a class="header" href="#declaration">Declaration</a></h3>
<pre><code class="language-kt">    fun predict(point: ArrayList&lt;Float&gt;): Int {
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Snippet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>fun predict(point: ArrayList&lt;Float&gt;): Int</code></td><td>Declares a method that returns an integer as a prediction from a list of floats.</td></tr>
</tbody></table>
</div>
<h3 id="gathering-the-distances"><a class="header" href="#gathering-the-distances">Gathering the distances</a></h3>
<pre><code class="language-kt">        val distances = arrayListOf&lt;Pair&lt;Float, Int&gt;&gt;()
        var distance = 0f
        for (i in 0 until matrix.size) {
            distance = calculateDistance(point, matrix[i])
            distances.add(Pair(distance, labels[i]))
        }
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Snippet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>val distances = arrayListOf&lt;Pair&lt;Float,Int&gt;&gt;()</code></td><td>Declares a list of <code>Float,Int</code> pairs that would store the distances.</td></tr>
<tr><td><code>var distance = 0f</code></td><td>Declares a variable <code>distance</code> with the value of <code>0f</code>.</td></tr>
<tr><td><code>for (i in 0 until matrix.size)</code></td><td>Creates a loop that ends until the size of the <code>matrix</code> is reached.</td></tr>
<tr><td><code>distance = calculateDistance(point, matrix[i])</code></td><td>Calculates the distance between the <code>point</code> and the <code>matrix</code>. Keep in mind that the values of <code>point</code> comes from the user while the values of <code>matrix</code> comes from the model.</td></tr>
<tr><td><code>distances.add(Pair(distance,labels[i]))</code></td><td>Adds the calculated distance and pairs it to a label from <code>labels</code>.</td></tr>
</tbody></table>
</div>
<h4 id="visualization-2"><a class="header" href="#visualization-2">Visualization</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Variables</th><th>Value</th></tr></thead><tbody>
<tr><td><code>point</code></td><td>9f, 8f, 7f, 6f, 5f</td></tr>
<tr><td><code>matrix</code></td><td>0f, 1f, 2f, 3f, 4f</td></tr>
<tr><td><code>labels</code></td><td>5, 7, 3, 4, 1</td></tr>
</tbody></table>
</div>
<p>For the sake of simplicity, the values of <code>point</code> and <code>matrix</code> are the same as the examples of <code>ps1</code> and <code>ps2</code> as given during the visualization of the <a href="chapters/knn/knnClassifier.html#calculatedistance"><code>calculateDistance</code></a> from earlier.
When these distances are calculated, they are each given a label which gets stored under <code>distances</code> and can be visualized like so:</p>
<div class="table-wrapper"><table><thead><tr><th>Index</th><th>Distance (<code>Float</code>)</th><th>Labels (<code>Int</code>)</th></tr></thead><tbody>
<tr><td>0</td><td>81f</td><td>5</td></tr>
<tr><td>1</td><td>130f</td><td>7</td></tr>
<tr><td>2</td><td>155f</td><td>3</td></tr>
<tr><td>3</td><td>164f</td><td>4</td></tr>
<tr><td>4</td><td>165f</td><td>1</td></tr>
</tbody></table>
</div>
<p>Therefore, another way of visualizing the variable <code>distances</code> would be the following:</p>
<div class="table-wrapper"><table><thead><tr><th>Variables</th><th>Value</th></tr></thead><tbody>
<tr><td><code>distances</code></td><td>[ 81f, 5 ], [ 130f, 7 ], [ 155f, 3 ], [ 164f, 4 ], [ 165f, 1 ]</td></tr>
</tbody></table>
</div>
<h3 id="sorting-the-distances"><a class="header" href="#sorting-the-distances">Sorting the distances</a></h3>
<pre><code class="language-kt">        distances.sortWith(compareBy { it.first })
        val hashmap = hashMapOf&lt;Int, Int&gt;()
        val min = k.coerceAtMost(matrix.size)
        for (i in 0 until min) {
            hashmap[i] = hashmap.getOrDefault(i, 0) + 1
        }
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Snippet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>distances.sortWith(compareBy{it.first})</code></td><td>Sorts <code>distances</code> according to the <code>distance</code>.</td></tr>
<tr><td><code>val hashmap = hasMapOf&lt;Int, Int&gt;()</code></td><td>Creates a <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-hash-map/">hashmap</a> with <code>Int</code> as a key and value.</td></tr>
<tr><td><code>val min = k.coerceAtMost(matrix.size)</code></td><td>Ensures that the value of <code>k</code> does not exceed the size of <code>matrix</code> and stores it in the variable <code>min</code>.</td></tr>
<tr><td><code>for (i in 0 until min)</code></td><td>Creates a loop that ends until the size of <code>min</code> is reached.</td></tr>
<tr><td><code>hashmap[i] = hashmap.getOrDefault(i, 0) + 1</code></td><td>Stores either the current index plus 1 to the hashmap or 1 if there is no value paired with that index.</td></tr>
</tbody></table>
</div>
<h4 id="visualization-3"><a class="header" href="#visualization-3">Visualization</a></h4>
<p>By running <code>distances.sortWith(compareBy{it.first})</code>, we arrange the values in an ascending order according to the distance like so:</p>
<div class="table-wrapper"><table><thead><tr><th>Variables</th><th>Value</th></tr></thead><tbody>
<tr><td><code>distances</code></td><td>[ 81f, 5 ], [ 130f, 7 ], [ 155f, 3 ], [ 164f, 4 ], [ 165f, 1 ]</td></tr>
</tbody></table>
</div>
<blockquote>
<p><strong>NOTE:</strong> For the sake of continuity, the initial values of <code>distances</code> given in this example is already arranged in an ascending order so the function would not do anything for this example.</p>
</blockquote>
<p>After sorting the distances, we get our minimum value which is <code>k</code>. By default, the constructor for the class sets it to <code>3</code>, 
but by using <code>coerceAtMost(matrix.size)</code> ensures that the value of <code>k</code> would never be greater than <code>matrix.size</code>. 
Then, we store the pairs until the <code>min</code> value into the hashmap like so:</p>
<blockquote>
<p><strong>NOTE:</strong> As of the time of writing, I am unsure whether the values being written to the hashmap is correct due to my unfamiliarity with the language.
Please feel free to correct.</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>index</th><th>hashmap</th><th>distances</th></tr></thead><tbody>
<tr><td>0</td><td>[ 0, 1 ]</td><td>[81f, 5 ]</td></tr>
<tr><td>1</td><td>[ 1, 2 ]</td><td>[130f, 7]</td></tr>
<tr><td>2</td><td>[ 2, 3 ]</td><td>[155f, 3]</td></tr>
<tr><td>3</td><td></td><td>[164f, 4]</td></tr>
<tr><td>4</td><td></td><td>[165f, 1]</td></tr>
</tbody></table>
</div>
<p>In the example above, <code>min = 3</code> that is why there are no more values stored on the 4th and 5th entry despite the number of entries in <code>distances</code> we have.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
